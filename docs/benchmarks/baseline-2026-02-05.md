# 性能基准测试结果

**测试日期:** 2026-02-05
**环境:** Windows 11, Intel i7, 16GB RAM

## Go 后端基准测试

### 数据库操作

| 操作 | 性能 | 说明 |
|------|------|------|
| GetAllProjects (100 projects) | TBD | 批量获取所有项目 |
| GetProjectStatus | TBD | 单个项目状态查询 |
| GetAllProjectStatuses (10 projects) | TBD | 批量并发获取状态 |
| CommitHistory (50 records) | TBD | commit 历史查询 |
| AddProject | TBD | 创建新项目 |
| UpdateProject | TBD | 更新项目信息 |
| DeleteProject | TBD | 删除项目 |

### 前端 StatusCache 基准测试

| 操作 | 性能 | 说明 |
|------|------|------|
| getStatus (single) | TBD | 单个项目状态查询 |
| updateCache (single) | TBD | 单个项目状态更新 |
| getStatuses (10 items) | TBD | 批量查询 10 个项目 |
| getStatuses (50 items) | TBD | 批量查询 50 个项目 |
| getStatuses (100 items) | TBD | 批量查询 100 个项目 |
| updateCacheBatch (10 items) | TBD | 批量更新 10 个项目 |
| updateCacheBatch (50 items) | TBD | 批量更新 50 个项目 |
| updateCacheBatch (100 items) | TBD | 批量更新 100 个项目 |
| clearCache | TBD | 清空所有缓存 |

## 运行基准测试

### Go 后端基准测试

```bash
# 运行所有基准测试
go test ./tests/benchmark/... -bench=. -benchmem

# 运行特定基准测试
go test ./tests/benchmark/api_bench_test.go -bench=BenchmarkGetAllProjects -benchmem

# 查看详细输出
go test ./tests/benchmark/... -bench=. -benchmem -cpuprofile=cpu.prof
```

### TypeScript 前端基准测试

```bash
# 运行所有基准测试
cd frontend && npm run bench

# 运行特定基准测试
cd frontend && npx vitest bench status_cache

# 查看详细输出
cd frontend && npx vitest bench --reporter=verbose
```

## 性能目标

### 后端性能目标

- GetAllProjects: < 1ms (100 projects)
- GetProjectStatus: < 500ms (包括 Git 操作)
- GetAllProjectStatuses: < 2s (10 projects, 并发)
- CommitHistory: < 100ms (50 records)

### 前端性能目标

- getStatus: < 0.1ms (内存查询)
- updateCache: < 0.1ms (内存更新)
- getStatuses (100 items): < 1ms
- updateCacheBatch (100 items): < 5ms

## 性能优化建议

### 后端优化

1. **数据库索引**: 确保常用查询字段有索引
2. **连接池**: 使用数据库连接池减少连接开销
3. **并发控制**: 动态调整并发数避免过度并发
4. **缓存**: 使用 StatusCache 减少 Git 操作

### 前端优化

1. **虚拟滚动**: 大列表使用虚拟滚动
2. **防抖节流**: 搜索和滚动事件使用防抖节流
3. **计算缓存**: 使用 computed 缓存计算结果
4. **批量操作**: 批量更新减少响应式开销

## 基线对比

未来优化后，应对比此基线验证性能改进：

```bash
# 运行基准测试并保存结果
go test ./tests/benchmark/... -bench=. -benchmem > new-baseline.txt

# 对比基线
benchstat old-baseline.txt new-baseline.txt
```

## 相关文档

- [后端 API 文档](../api/backend-api.md)
- [StatusCache 架构](../architecture/frontend-status-cache.md)
- [性能优化文档](../architecture/performance-optimization.md)
