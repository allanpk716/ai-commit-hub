# è‡ªåŠ¨æ›´æ–°åŠŸèƒ½æµ‹è¯•æŒ‡å—

**æ—¥æœŸ**: 2026-02-02
**åˆ†æ”¯**: feature/auto-update
**çŠ¶æ€**: å®æ–½å®Œæˆï¼Œå¾…æµ‹è¯•

---

## ğŸ“‹ æµ‹è¯•æ¸…å•

### é˜¶æ®µ 1: ç‰ˆæœ¬ç®¡ç†æ¨¡å—æµ‹è¯•

#### âœ… å•å…ƒæµ‹è¯•
```bash
cd .worktrees/auto-update
go test ./pkg/version -v
```

**é¢„æœŸç»“æœ**: æ‰€æœ‰æµ‹è¯•é€šè¿‡
- TestParseVersion: 4ä¸ªæµ‹è¯•ç”¨ä¾‹
- TestCompareVersions: 15ä¸ªæµ‹è¯•ç”¨ä¾‹
- TestGetVersion: 2ä¸ªæµ‹è¯•ç”¨ä¾‹
- TestIsDevVersion: 2ä¸ªæµ‹è¯•ç”¨ä¾‹

**éªŒè¯ç‚¹**:
- [x] ç‰ˆæœ¬å·è§£ææ­£ç¡®ï¼ˆv1.2.3 å’Œ 1.2.3 æ ¼å¼ï¼‰
- [x] ç‰ˆæœ¬æ¯”è¾ƒé€»è¾‘æ­£ç¡®ï¼ˆæ”¯æŒä¸»ã€æ¬¡ã€ä¿®è®¢ç‰ˆæœ¬æ¯”è¾ƒï¼‰
- [x] å¼€å‘ç‰ˆæœ¬è¯†åˆ«ï¼ˆdev -> dev-uncommittedï¼‰
- [x] ç”Ÿäº§ç‰ˆæœ¬æ ¼å¼åŒ–ï¼ˆ1.0.0 -> v1.0.0ï¼‰

---

### é˜¶æ®µ 2: åç«¯æ›´æ–°é€»è¾‘æµ‹è¯•

#### âœ… æ•°æ®æ¨¡å‹æµ‹è¯•
```bash
cd .worktrees/auto-update
go test ./pkg/repository -v
```

**é¢„æœŸç»“æœ**: æµ‹è¯•é€šè¿‡ï¼ŒUpdatePreferences è¡¨å·²åˆ›å»º

**éªŒè¯ç‚¹**:
- [x] UpdateInfo ç»“æ„ä½“å®šä¹‰æ­£ç¡®
- [x] UpdatePreferences ç»“æ„ä½“å®šä¹‰æ­£ç¡®
- [x] æ•°æ®åº“è¿ç§»æˆåŠŸ

#### â³ æ›´æ–°æ£€æŸ¥æœåŠ¡æµ‹è¯•

**ç”±äºéœ€è¦ç½‘ç»œè®¿é—®ï¼Œæš‚æ—¶è·³è¿‡è‡ªåŠ¨åŒ–æµ‹è¯•**

**æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤**:
```bash
cd .worktrees/auto-update
go run main.go
```

**é¢„æœŸç»“æœ**:
- [ ] åº”ç”¨å¯åŠ¨æ—¶åœ¨æ§åˆ¶å°çœ‹åˆ° "æ£€æŸ¥æ›´æ–°" æ—¥å¿—
- [ ] çœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯æ—¥å¿—ï¼ˆcurrent, latestï¼‰
- [ ] å¦‚æœæœ‰æ›´æ–°ï¼Œçœ‹åˆ° "å‘ç°æ–°ç‰ˆæœ¬" æ—¥å¿—
- [ ] å¦‚æœå·²æ˜¯æœ€æ–°ï¼Œçœ‹åˆ° "å·²æ˜¯æœ€æ–°ç‰ˆæœ¬" æ—¥å¿—

---

### é˜¶æ®µ 3: å‰ç«¯ UI ç»„ä»¶æµ‹è¯•

#### ğŸ”¨ æ„å»ºå‰ç«¯
```bash
cd .worktrees/auto-update/frontend
npm install
npm run build
```

**é¢„æœŸç»“æœ**:
- [ ] node_modules å®‰è£…æˆåŠŸ
- [ ] å‰ç«¯æ„å»ºæˆåŠŸï¼Œdist ç›®å½•ç”Ÿæˆ
- [ ] æ— ç¼–è¯‘é”™è¯¯

#### ğŸ”¨ æ„å»ºåº”ç”¨
```bash
cd .worktrees/auto-update
wails build -clean -ldflags "-X main.version=1.0.0-test"
```

**é¢„æœŸç»“æœ**:
- [ ] Go åç«¯ç¼–è¯‘æˆåŠŸ
- [ ] å¯æ‰§è¡Œæ–‡ä»¶ç”Ÿæˆ: build/bin/ai-commit-hub.exe
- [ ] ç‰ˆæœ¬å·å·²æ³¨å…¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶

#### ğŸ”¨ å¯åŠ¨åº”ç”¨æµ‹è¯•
```bash
cd .worktrees/auto-update
wails dev
```

**æµ‹è¯•åœºæ™¯**:

**åœºæ™¯ 1: å¯åŠ¨æ—¶æ£€æŸ¥æ›´æ–°**
1. å¯åŠ¨åº”ç”¨
2. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
3. é¢„æœŸï¼šçœ‹åˆ° "æ£€æŸ¥æ›´æ–°" ç›¸å…³æ—¥å¿—

**åœºæ™¯ 2: æ›´æ–°é€šçŸ¥æ˜¾ç¤º**
1. å¦‚æœæœ‰æ–°ç‰ˆæœ¬å¯ç”¨
2. é¢„æœŸï¼šåœ¨ CommitPanel é¡¶éƒ¨çœ‹åˆ°ç´«è‰²æ¸å˜çš„é€šçŸ¥æ¡
3. é€šçŸ¥æ¡æ˜¾ç¤ºï¼š"å‘ç°æ–°ç‰ˆæœ¬ v{version}"
4. æä¾› "æŸ¥çœ‹è¯¦æƒ…" å’Œ "å¿½ç•¥" æŒ‰é’®

**åœºæ™¯ 3: ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"**
1. ç‚¹å‡» "æŸ¥çœ‹è¯¦æƒ…" æŒ‰é’®
2. é¢„æœŸï¼šæ‰“å¼€æ›´æ–°è¯¦æƒ…å¯¹è¯æ¡†
3. å¯¹è¯æ¡†æ˜¾ç¤ºï¼š
   - å½“å‰ç‰ˆæœ¬ vs æœ€æ–°ç‰ˆæœ¬
   - æ›´æ–°å†…å®¹ï¼ˆRelease Notesï¼‰
   - æ–‡ä»¶å¤§å°
   - "ç«‹å³æ›´æ–°"ã€"è·³è¿‡æ­¤ç‰ˆæœ¬"ã€"ç¨åæé†’" æŒ‰é’®

**åœºæ™¯ 4: ç‚¹å‡»"å¿½ç•¥"**
1. ç‚¹å‡» "å¿½ç•¥" æŒ‰é’®
2. é¢„æœŸï¼šé€šçŸ¥æ¡æ¶ˆå¤±
3. æœ¬æ¬¡ä¼šè¯ä¸å†æ˜¾ç¤ºè¯¥ç‰ˆæœ¬

---

### CI/CD æµç¨‹æµ‹è¯•

#### ğŸš€ åˆ›å»ºæµ‹è¯• tag
```bash
cd .worktrees/auto-update
git tag v1.0.0-test
git push origin v1.0.0-test
```

**é¢„æœŸç»“æœ**:
- [ ] Tag æˆåŠŸæ¨é€åˆ° GitHub
- [ ] GitHub Actions è‡ªåŠ¨è§¦å‘
- [ ] æ„å»ºä»»åŠ¡å¼€å§‹è¿è¡Œ

#### ğŸ” éªŒè¯ GitHub Actions
è®¿é—®: https://github.com/allanpk716/ai-commit-hub/actions

**é¢„æœŸç»“æœ**:
- [ ] çœ‹åˆ° "Release" workflow åœ¨è¿è¡Œ
- [ ] Windows å’Œ macOS æ„å»ºä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ
- [ ] æ„å»ºå®Œæˆååˆ›å»º Release
- [ ] Release æ ‡é¢˜: v1.0.0-test
- [ ] é™„ä»¶åŒ…å«ä¸¤ä¸ª zip æ–‡ä»¶:
  - ai-commit-hub-1.0.0-test-windows.zip
  - ai-commit-hub-1.0.0-test-darwin.zip

#### ğŸ“¦ éªŒè¯ Release
è®¿é—®: https://github.com/allanpk716/ai-commit-hub/releases

**é¢„æœŸç»“æœ**:
- [ ] çœ‹åˆ° v1.0.0-test release
- [ ] Release Notes è‡ªåŠ¨ç”Ÿæˆ
- [ ] å¯ä»¥ä¸‹è½½ zip æ–‡ä»¶

---

## ğŸ”§ è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
```go
// åœ¨ä»£ç ä¸­æ·»åŠ 
logger.Infof("Version: %s", version.GetVersion())
logger.Infof("Full Version: %s", version.GetFullVersion())
logger.Infof("Is Dev: %v", version.IsDevVersion())
```

### æ‰‹åŠ¨è§¦å‘æ›´æ–°æ£€æŸ¥
åœ¨å‰ç«¯æ§åˆ¶å°æ‰§è¡Œï¼š
```javascript
import { useUpdateStore } from '@/stores/updateStore'
const updateStore = useUpdateStore()
await updateStore.checkForUpdates()
```

### æ¨¡æ‹Ÿ GitHub API å“åº”
ç”±äº GitHub API é™æµï¼ˆ60æ¬¡/å°æ—¶ï¼‰ï¼Œæµ‹è¯•æ—¶å¯èƒ½éœ€è¦ï¼š
1. ä½¿ç”¨çœŸå®çš„ GitHub token
2. æˆ–è€…ç­‰å¾…é…é¢é‡ç½®
3. æˆ–è€…ä¿®æ”¹ä»£ç è¿”å› mock æ•°æ®

---

## âœ… æµ‹è¯•ç»“æœè®°å½•

### å•å…ƒæµ‹è¯•
- [x] pkg/version: âœ… å…¨éƒ¨é€šè¿‡
- [ ] pkg/service: â­ï¸ è·³è¿‡ï¼ˆé¢„å…ˆå­˜åœ¨çš„ç¼–è¯‘é”™è¯¯ï¼‰
- [ ] pkg/repository: âœ… é€šè¿‡

### é›†æˆæµ‹è¯•
- [ ] åº”ç”¨å¯åŠ¨: â³ å¾…æµ‹è¯•
- [ ] æ›´æ–°æ£€æŸ¥: â³ å¾…æµ‹è¯•
- [ ] UI æ˜¾ç¤º: â³ å¾…å‰ç«¯æ„å»º

### CI/CD æµ‹è¯•
- [ ] Tag æ¨é€: â³ å¾…æ‰§è¡Œ
- [ ] GitHub Actions: â³ å¾…æ‰§è¡Œ
- [ ] Release åˆ›å»º: â³ å¾…éªŒè¯

---

## ğŸ“ å·²çŸ¥é—®é¢˜

1. **error_service_test.go ç¼–è¯‘é”™è¯¯**
   - çŠ¶æ€: é¢„å…ˆå­˜åœ¨çš„é—®é¢˜ï¼Œä¸å½±å“è‡ªåŠ¨æ›´æ–°åŠŸèƒ½
   - å½±å“: æ— æ³•è¿è¡Œ pkg/service åŒ…çš„æµ‹è¯•
   - è§£å†³: éœ€è¦å•ç‹¬ä¿®å¤è¿™ä¸ªæ–‡ä»¶çš„æµ‹è¯•

2. **å‰ç«¯æœªæ„å»º**
   - çŠ¶æ€: æ­£å¸¸ï¼Œéœ€è¦å…ˆæ„å»ºå‰ç«¯
   - å½±å“: æ— æ³•è¿è¡Œ wails dev
   - è§£å†³: è¿è¡Œ `cd frontend && npm run build`

---

## ğŸ¯ ä¸‹ä¸€æ­¥

**é€‰é¡¹ 1: ç»§ç»­æµ‹è¯•**
```bash
# æ„å»ºå‰ç«¯
cd .worktrees/auto-update/frontend && npm run build

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
cd .worktrees/auto-update && wails dev
```

**é€‰é¡¹ 2: æ¨é€ tag æµ‹è¯• CI/CD**
```bash
cd .worktrees/auto-update
git tag v1.0.0-test
git push origin v1.0.0-test
```

**é€‰é¡¹ 3: åˆå¹¶åˆ°ä¸»åˆ†æ”¯**
```bash
git checkout main
git merge feature/auto-update
git push origin main
```

---

**æµ‹è¯•å®Œæˆåï¼Œè¯·æ›´æ–°æœ¬æ–‡ä»¶è®°å½•æµ‹è¯•ç»“æœã€‚**
